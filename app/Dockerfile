FROM node:18-alpine AS builder

ARG PORTAL_URL
ARG URL_API
ARG URL_MT_LOGIN
ARG CI_PROJECT_NAME

ENV PORTAL_URL=$PORTAL_URL
ENV URL_API=$URL_API
ENV URL_MT_LOGIN=$URL_MT_LOGIN
ENV CI_PROJECT_NAME=$CI_PROJECT_NAME

WORKDIR /app
COPY . .

RUN yarn install
RUN yarn build

EXPOSE 3006

CMD ["node", "server.js"]
